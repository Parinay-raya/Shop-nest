<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Shopnest</title>

    <!-- Link Swiper's CSS -->
    <link rel="stylesheet" href="swiperJs/swiper-bundle.min.css" />

    <!-- Link Font Awesome -->
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/webfonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin="anonymous">

    <!-- Link File CSS -->
    <link rel="stylesheet" href="style.css">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha384-oAij9C+YpXtnHLHOP1qnF4TZbKipP9pB6FFziVA+roGk3IvdOl5p1NxG5IoNdulD" crossorigin="anonymous">

</head>

<body class="menu-side-in-bag">

    <header>

        <div class="header-top">
            <div class="contanier">
                <p>Welcome to Shopnest </p>
                <div class="link-top-heder">
                    <a href="/./Dashboard/myaccount.html">My Account</a>
                    <a href="/sign-in-page.html" id="authLink">Sign In</a>
                    <a href="#">My Wishlist</a>
                    <!-- <a href="/sign-in-page.html">Sign In</a> -->
                    <a href="#">Contact</a>
                </div>
            </div>
        </div>

        <div class="header-info">
            <div class="contanier">
                <img class="logo" src="img/Logo-img.png" alt="">

                <div class="search-bar">
                    <form action="">
                        <input type="search" placeholder="Search for your request...">
                        <button class="btn-srch">Search</button>
                    </form>
                </div>
                <div class="card">
                    <div class="price">
                        <p>Cart :</p>
                        <span>255.00 Pound</span>
                    </div>
                    <a href="mycart.html"><i class="fa-solid fa-bag-shopping"></i> <span
                            class="count-in-card">2</span></a>


                </div>
            </div>
        </div>

        <div class="header-bottom">
            <div class="contanier">
                <i id="open-side" class="fa-solid fa-bars"></i>
                <ul class="nav-links">

                    <li><a href="index.html"> Home</a>

                    </li>

                    <li>
                        <a href="features.html">Electrical Appliances </a>

                        <div class="drobdwon">
                            <ul>
                                <li><a href="smart-phones.html"> Tablets</a></li>
                            </ul>
                            <ul>
                                <li><a href="#">Televisions</a></li>
                            </ul>
                            <ul>
                                <li><a href="#">Headphones</a></li>
                            </ul>
                            <ul>
                                <li><a href="#">Smart Watches</a></li>
                            </ul>
                        </div>
                    </li>

                    <li>
                        <a href="home-essentials.html"> Home Essentials</a>
                    </li>

                    <li>
                        <a href="smart-phones.html"> Mobile Phones & Accessories </a>
                    </li>
                    <!-- <li><a href="index.html"> Clothing </a></li> -->

                    <!-- <li><a href="index.html"> Beauty Products </a></li>
                            <li><a href="index.html"> Furnishings</a></li>
                        -->


                </ul>
                <a href="sign-up-page.html" class="sign-in-btn"><i class="fa-solid fa-user-plus"></i> Create Account
                </a>


            </div>
        </div>


    </header>

    <div class="contanier">


        <div class="box-sign-up">
            <div class="signup">

                <form id="loginForm"> <!-- Ensure ID matches in JavaScript -->

                    <label for="email">Email</label>
                    <div class="inp">
                        <i class="fa-solid fa-envelope"></i>
                        <input type="email" id="email" placeholder="Enter your email" required>
                    </div>

                    <label for="password">Password</label>
                    <div class="inp"
                        style="display: flex; align-items: center; border: 1px solid #ccc; padding: 5px; border-radius: 5px;">
                        <input type="password" id="password" placeholder="Enter your Password"
                            style="flex: 1; border: none; outline: none;">
                        <i class="fa-solid fa-eye" id="togglePassword" style="cursor: pointer; padding: 5px;"></i>
                    </div>
                    <div class="check-box">
                        <div class="check">
                            <input type="checkbox">
                            <span>Save Account</span>
                        </div>
                        <a href="#" class="forg">Forgot Password?</a>
                    </div>

                    <button type="submit">Login</button>
                </form>

                <span class="line-sign">or</span>

                <div class="sign-soc">
                    <div class="box">
                        <a class="btn" href="#"><img src="img/google.png" alt=""> Log in with Google Account</a>
                    </div>
                </div>
                <p class="creat-ac">Don't have an account? <a href="/sign-up-page.html">Create an Account</a>
                    </a></p>
            </div>
        </div>
    </div>


    <footer>
        <div class="contanier">
            <div class="top-footer">
                <div class="row">
                    <img class="logo" src="img/Logo-img.png" alt="">
                    <div class="hotline">

                        <div class="hotline-text">
                            <h6> 24/7 Custoomer Service</h6>
                            <span>(+100) 123 456 7890</span>
                        </div>
                        <i class="fa-solid fa-headset"></i>
                    </div>

                </div>
                <div class="small-row">
                    <h6>Learn More About Us</h6>
                    <div class="links-row">
                        <a href="#"> <i class="fa-solid fa-angle-left"></i>About Shopnest</a>
                        <a href="#"><i class="fa-solid fa-angle-left"></i>Shipping & Delivery</a>

                    </div>
                </div>

                <div class="small-row">
                    <h6>Shop With Us</h6>
                    <div class="links-row">
                        <a href="#"><i class="fa-solid fa-angle-left"></i>Your Account</a>
                        <a href="#"> <i class="fa-solid fa-angle-left"></i>Your Purchases</a>
                        <a href="#"> <i class="fa-solid fa-angle-left"></i>Your Addresses</a>
                        <a href="#"> <i class="fa-solid fa-angle-left"></i>Your Lists</a>
                    </div>
                </div>

                <div class="small-row">
                    <h6>Let Us Help You</h6>
                    <div class="links-row">
                        <a href="#"><i class="fa-solid fa-angle-left"></i>Help & Support</a>
                        <a href="#"><i class="fa-solid fa-angle-left"></i>Track Your Order</a>
                        <a href="#"><i class="fa-solid fa-angle-left"></i>Return Policy</a>
                        <a href="#"><i class="fa-solid fa-angle-left"></i>Terms & Conditions</a>
                    </div>
                </div>
            </div>

        </div>

        <div class="bottom-footer">
            <div class="contanier">
                <p>Copyright &copy; <span>Shopnest. </span>Powered by <span>Parinay Raya</span></p>
                <div class="payment">
                    <img src="img/payment-1.png" alt="">
                    <img src="img/payment-2.png" alt="">
                    <img src="img/payment-3.png" alt="">
                    <img src="img/payment-4.png" alt="">
                </div>
            </div>
        </div>
    </footer>

    <!-- Swiper JS -->
    <script src="swiperJs/swiper-bundle.min.js"></script>

    <!-- Linke File JS -->
    <script src="main.js"></script>
    <script>
        document.getElementById("togglePassword").addEventListener("click", function () {
            const passwordInput = document.getElementById("password");

            if (passwordInput.type === "password") {
                passwordInput.type = "text";
                this.classList.remove("fa-eye");
                this.classList.add("fa-eye-slash"); // üëÅÔ∏è‚û°Ô∏èüôà
            } else {
                passwordInput.type = "password";
                this.classList.remove("fa-eye-slash");
                this.classList.add("fa-eye"); // üôà‚û°Ô∏èüëÅÔ∏è
            }
        });

        //login user functionality
        document.addEventListener("DOMContentLoaded", function () {
            const loginForm = document.getElementById("loginForm");

            if (loginForm) {
                loginForm.addEventListener("submit", async function (event) {
                    event.preventDefault();

                    const email = document.getElementById("email").value.trim();
                    const password = document.getElementById("password").value.trim();

                    if (!email || !password) {
                        alert("‚ö†Ô∏è Please enter email and password.");
                        return;
                    }

                    try {
                        const response = await fetch("https://shop-nest-0tcz.onrender.com/user/login", {
                            method: "POST",
                            headers: { "Content-Type": "application/json" },
                            body: JSON.stringify({ email, password }),
                        });

                        const data = await response.json();
                        console.log("‚úÖ Login Response:", data);

                        if (response.ok) {
                            alert("üéâ Login successful!");

                            // Ensure fullname exists before storing in localStorage
                            if (data.fullname) {
                                localStorage.setItem("user", JSON.stringify({
                                    fullname: data.fullname,
                                    email: data.email,
                                    token: data.token
                                }));
                            } else {
                                console.warn("‚ö†Ô∏è Fullname is missing in response!");
                            }

                            window.location.href = "index.html"; // Redirect to dashboard
                        } else {
                            alert(`‚ùå Error: ${data.message}`);
                        }
                    } catch (error) {
                        console.error("‚ùå Login Failed:", error);
                        alert("‚ö†Ô∏è Something went wrong. Please try again.");
                    }

                });
            }
        });


        document.addEventListener("DOMContentLoaded", function () {
            const authLink = document.getElementById("authLink");
            const myAccountLink = document.getElementById("myAccountLink");

            // Check if user is logged in
            const user = JSON.parse(localStorage.getItem("user"));

            if (user) {
                authLink.textContent = "Logout";
                authLink.href = "#"; // Prevent navigating to sign-in page
                authLink.addEventListener("click", function () {
                    localStorage.removeItem("user"); // Clear user data
                    window.location.reload(); // Refresh to update UI                                                                                                                                                                                                                                               
                });

                // Redirect "My Account" to ./Dashboard/myaccount.html
                myAccountLink.href = "/./Dashboard/myaccount.html";
            }
        });

    </script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <script src="navbar.js"></script>

</body>

</html>